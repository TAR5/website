<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Damus</title>
		<link rel="stylesheet" href="css/styles.css?v=117">
		<link rel="stylesheet" href="css/responsive.css?v=8">
		<link rel="stylesheet" href="css/fontawesome.css?v=2">
		<script defer src="js/ui/util.js?v=5"></script>
		<script defer src="js/ui/render.js?v=6"></script>
		<script defer src="js/noble-secp256k1.js?v=1"></script>
		<script defer src="js/bech32.js?v=1"></script>
		<script defer src="js/nostr.js?v=6"></script>
		<script defer src="js/damus.js?v=78"></script>
	</head>
	<body>
		<script>
		const relay = 0; // relay is declared for backwards compatibibility.
		// This is our main entry.
		// https://developer.mozilla.org/en-US/docs/Web/API/Window/DOMContentLoaded_event
		addEventListener('DOMContentLoaded', (ev) => {
			// TODO fix race condition where profile doesn't load fast enough.
			damus_web_init();
		});
		</script>
		<nav id="gnav">
			<button class="icon" role="open-gnav" title="Open Menu" onclick="toggle_gnav(this)">
				<i class="fa fa-fw fa-hand-peace"></i>
			</button>
			<button class="icon" role="sign-out" title="Sign Out" onclick="press_logout()">
				<i class="fa fa-fw fa-arrow-right-from-bracket"></i>
			</button>
		</nav>
		<div id="container">
			<div class="flex-fill vertical-hide"></div>
			<div id="nav" class="flex-noshrink vertical-hide">
				<div>
					<div id="app-icon-logo">
						<!--<img src="https://damus.io/img/damus.svg">-->
						<i class="fa-regular fa-fw fa-hand-peace"></i>
					</div>
					<button id="home-button" onclick="switch_view('home')" class="nav icon" title="Home">
						<i class="fa fa-fw fa-home"></i><span class="hide">Home</span>
					</button>
					<button id="explore-button" onclick="switch_view('explore')" class="nav icon" title="Explore">
						<i class="fa fa-fw fa-globe"></i><span class="hide">Explore</span>
					</button>
					<button onclick="press_logout()" title="Sign Out" class="nav icon">
						<i class="fa fa-fw fa-arrow-right-from-bracket"></i><span class="hide">Sign Out</span>
					</button>
				</div>
			</div>
			<div id="view">
				<div id="home-view">
					<header>
						<label>Home</label>
					</header>
					<div id="newpost">
						<div class="my-userpic vertical-hide"><!-- To be loaded. --></div>
						<div>
							<textarea placeholder="What's up?" oninput="post_input_changed(this)" class="post-input" id="post-input"></textarea>
							<div class="post-tools">
								<input id="content-warning-input" class="cw hide" type="text" placeholder="Reason"/>
								<button title="Mark this message as sensitive." onclick="toggle_cw(this)" class="cw icon">
									<i class="fa-solid fa-triangle-exclamation"></i>
								</button>
								<button onclick="send_post(this)" class="action" id="post-button" disabled>Send</button>
							</div>
						</div>
					</div>
					<div class="events"></div>
				</div>
				<div style="display:none" id="explore-view">
					<header>
						<label>Explore</label>
					</header>
					<div class="events"></div>
				</div>
			</div>
			<div class="flex-fill vertical-hide"></div>
		</div>
		<div class="modal closed" id="reply-modal">
			<div id="reply-modal-content" class="modal-content">
				<header>
					<label>Reply To</label>
					<button class="icon" onclick="close_reply()">
						<i class="fa fa-xmark"></i>
					</button>
				</header>
				<div id="replying-to"></div>
				<div id="replybox">
					<textarea id="reply-content" class="post-input" 
						placeholder="Write your reply here..."></textarea>
					<div class="post-tools">
						<button id="reply-button" class="action" onclick="do_send_reply()">
							Reply
						</button>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
